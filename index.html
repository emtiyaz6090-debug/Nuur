<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deen - Ramadan 2026 Special</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Amiri&display=swap');
        body { font-family: 'Hind Siliguri', sans-serif; background-color: #F8FAFC; overflow-x: hidden; }
        .header-gradient { background: linear-gradient(135deg, #1e1b4b 0%, #4338ca 100%); border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; }
        .page { display: none; min-height: 100vh; padding-bottom: 120px; }
        .page.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .font-arabic { font-family: 'Amiri', serif; text-align: right; direction: rtl; }
        .nav-btn { color: #64748b; transition: all 0.3s ease; font-size: 1.2rem; }
        .nav-active { color: #4338ca !important; background: #f0f2ff; border-radius: 15px; }
        .tasbih-circle { width: 200px; height: 200px; border: 8px solid #4338ca; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; user-select: none; transition: transform 0.1s; box-shadow: 0 10px 20px rgba(67, 56, 202, 0.2); }
        .tasbih-circle:active { transform: scale(0.95); }
    </style>
</head>
<body class="max-w-md mx-auto shadow-2xl bg-white relative">

    <audio id="surah-audio"></audio>

    <div id="page-home" class="page active">
        <div class="header-gradient pt-10 pb-28 px-6 text-white text-center">
            <h1 class="text-2xl font-black italic tracking-tighter mb-4">DEEN</h1>
            <div class="space-y-1">
                <p class="text-xl font-bold text-orange-300">рззрж▓рж╛ рж░ржоржЬрж╛ржи, рззрзкрзкрзн рж╣рж┐ржЬрж░рж┐</p>
                <p class="text-xs opacity-70">рззрзп ржлрзЗржмрзНрж░рзБржпрж╝рж╛рж░рж┐, рзирзжрзирзм (ржмрзГрж╣рж╕рзНржкрждрж┐ржмрж╛рж░)</p>
                <div class="mt-4 bg-red-500 text-white text-[12px] font-bold px-4 py-1 rounded-full inline-block">ЁЯМЩ ржЖржЬ ржкрзНрж░ржержо рж░рзЛржЬрж╛рж░ рж░рж╛ржд (рж▓ржХрзНрж╖рзНржорзАржкрзБрж░)</div>
            </div>
        </div>

        <div class="px-5 -mt-16">
            <div class="bg-white p-6 rounded-[30px] shadow-xl border border-gray-100 text-center">
                <p class="text-indigo-600 font-bold text-[10px] uppercase">ржкрж░ржмрж░рзНрждрзА ржирж╛ржорж╛ржЬ</p>
                <h2 id="next-prayer-time" class="text-4xl font-black text-slate-900 my-1">--:--</h2>
                <p id="next-prayer-name" class="text-sm font-bold text-gray-400">рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</p>
                <div class="grid grid-cols-2 gap-3 mt-6">
                    <div class="bg-blue-50 p-3 rounded-2xl border border-blue-100">
                        <p class="text-[10px] font-bold text-blue-500 uppercase">рж╕рзЗрж╣рж░рж┐ рж╢рзЗрж╖</p>
                        <p id="suhur-time" class="font-black text-blue-900 text-lg">--:--</p>
                    </div>
                    <div class="bg-orange-50 p-3 rounded-2xl border border-orange-100">
                        <p class="text-[10px] font-bold text-orange-600 uppercase">ржЗржлрждрж╛рж░</p>
                        <p id="iftar-time" class="font-black text-orange-900 text-lg">--:--</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="px-5 mt-8">
            <h3 class="font-bold text-slate-800 mb-4 px-2 text-sm">рж░ржоржЬрж╛ржи ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░ рзирзжрзирзм (рж▓ржХрзНрж╖рзНржорзАржкрзБрж░)</h3>
            <div class="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden mb-10">
                <table class="w-full text-center text-[11px]">
                    <thead class="bg-indigo-50 text-indigo-900">
                        <tr><th class="py-3">рж░рзЛржЬрж╛</th><th>рждрж╛рж░рж┐ржЦ</th><th>рж╕рзЗрж╣рж░рж┐</th><th>ржЗржлрждрж╛рж░</th></tr>
                    </thead>
                    <tbody id="ramadan-table-body" class="text-gray-600"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="page-quran" class="page px-5 pt-8">
        <h2 class="text-2xl font-black mb-6">ржЖрж▓-ржХрзБрж░ржЖржи</h2>
        <div id="surah-list" class="space-y-3"></div>
    </div>

    <div id="page-tasbih" class="page px-5 pt-8 text-center">
        <h2 class="text-2xl font-black mb-10 text-slate-800">ржбрж┐ржЬрж┐ржЯрж╛рж▓ рждрж╕ржмрж┐рж╣</h2>
        <div class="flex flex-col items-center justify-center space-y-8 mt-10">
            <div onclick="countTasbih()" class="tasbih-circle bg-white shadow-2xl">
                <span id="tasbih-count" class="text-6xl font-black text-indigo-600">0</span>
            </div>
            <p class="text-gray-400 font-bold tracking-widest uppercase text-xs">ржЬрж┐ржХрж┐рж░ ржХрж░рждрзЗ рж╕рж╛рж░рзНржХрзЗрж▓рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи</p>
            <button onclick="resetTasbih()" class="bg-red-50 text-red-500 px-8 py-3 rounded-2xl font-bold text-sm border border-red-100 active:scale-95 transition-all">рж░рж┐рж╕рзЗржЯ ржХрж░рзБржи</button>
        </div>
    </div>

    <div id="page-duas" class="page px-5 pt-8">
        <h2 class="text-2xl font-black mb-6">ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржжрзБржпрж╝рж╛</h2>
        <div class="space-y-4">
            <div class="bg-white p-5 rounded-3xl border border-gray-100 shadow-sm">
                <h4 class="text-orange-500 font-bold mb-2">рж░рзЛржЬрж╛рж░ ржирж┐ржпрж╝ржд</h4>
                <p class="font-arabic text-xl mb-2">┘Ж┘И┘К╪к ╪з┘Ж ╪з╪╡┘И┘Е ╪║╪п╪з ┘Е┘Ж ╪┤┘З╪▒ ╪▒┘Е╪╢╪з┘Ж ╪з┘Д┘Е╪и╪з╪▒┘Г ┘Б╪▒╪╢╪з ┘Д┘Г ┘К╪з ╪з┘Д┘Д┘З ┘Б╪к┘В╪и┘Д ┘Е┘Ж┘К ╪з┘Ж┘Г ╪з┘Ж╪к ╪з┘Д╪│┘Е┘К╪╣ ╪з┘Д╪╣┘Д┘К┘Е</p>
                <p class="text-xs text-gray-500 leading-relaxed">ржЕрж░рзНрже: рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржЖржорж┐ ржЖржЧрж╛ржорзАржХрж╛рж▓ ржкржмрж┐рждрзНрж░ рж░ржоржЬрж╛ржи ржорж╛рж╕рзЗрж░ ржлрж░ржЬ рж░рзЛржЬрж╛ рж░рж╛ржЦрж╛рж░ ржирж┐ржпрж╝ржд ржХрж░ржЫрж┐ред ржЕрждржПржм ржЖржкржирж┐ ржЖржорж╛рж░ ржкржХрзНрж╖ ржерзЗржХрзЗ рждрж╛ ржХржмрзБрж▓ ржХрж░рзБржи, ржирж┐рж╢рзНржЪржпрж╝ржЗ ржЖржкржирж┐ рж╕рж░рзНржмрж╢рзНрж░рзЛрждрж╛ ржУ рж╕рж░рзНржмржЬрзНржЮред</p>
            </div>
            <div class="bg-white p-5 rounded-3xl border border-gray-100 shadow-sm">
                <h4 class="text-indigo-500 font-bold mb-2">ржЗржлрждрж╛рж░рзЗрж░ ржжрзБржпрж╝рж╛</h4>
                <p class="font-arabic text-xl mb-2">╪з┘Д┘Д┘З┘Е ┘Д┘Г ╪╡┘Е╪к ┘И╪╣┘Д┘Й ╪▒╪▓┘В┘Г ╪з┘Б╪╖╪▒╪к</p>
                <p class="text-xs text-gray-500 leading-relaxed">ржЕрж░рзНрже: рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣! ржЖржорж┐ ржЖржкржирж╛рж░ржЗ рж╕ржирзНрждрзБрж╖рзНржЯрж┐рж░ ржЬржирзНржп рж░рзЛржЬрж╛ рж░рзЗржЦрзЗржЫрж┐ ржПржмржВ ржЖржкржирж╛рж░ржЗ ржжрзЗржпрж╝рж╛ рж░рж┐ржпрж┐ржХ ржжрзНржмрж╛рж░рж╛ ржЗржлрждрж╛рж░ ржХрж░ржЫрж┐ред</p>
            </div>
        </div>
    </div>

    <div id="page-names" class="page px-5 pt-8">
        <h2 class="text-2xl font-black mb-6">ржЖрж▓рзНрж▓рж╛рж╣рж░ рзпрзп ржирж╛ржо</h2>
        <div id="names-grid" class="grid grid-cols-2 gap-3"></div>
    </div>

    <div id="surah-detail" class="fixed inset-0 bg-white z-[100] hidden overflow-y-auto p-6">
        <div class="flex justify-between items-center mb-6 sticky top-0 bg-white py-2 border-b">
            <button onclick="closeSurah()" class="text-indigo-600 font-bold"><i class="fa-solid fa-arrow-left mr-2"></i>ржкрж┐ржЫржирзЗ</button>
            <h2 id="surah-title" class="text-lg font-bold"></h2>
            <button id="play-btn" onclick="toggleAudio()" class="w-10 h-10 bg-indigo-600 text-white rounded-full flex items-center justify-center">
                <i class="fa-solid fa-play"></i>
            </button>
        </div>
        <div id="ayats" class="space-y-10"></div>
    </div>

    <nav class="fixed bottom-4 left-1/2 -translate-x-1/2 w-[95%] max-w-sm bg-white/95 backdrop-blur-md rounded-[25px] flex justify-around items-center py-2 z-50 shadow-2xl border border-gray-100">
        <button onclick="switchPage('home')" id="nav-home" class="nav-btn nav-active p-3"><i class="fa-solid fa-house-chimney"></i></button>
        <button onclick="openQuran()" id="nav-quran" class="nav-btn p-3"><i class="fa-solid fa-book-quran"></i></button>
        <button onclick="switchPage('tasbih')" id="nav-tasbih" class="nav-btn p-3"><i class="fa-solid fa-fingerprint"></i></button>
        <button onclick="switchPage('duas')" id="nav-duas" class="nav-btn p-3"><i class="fa-solid fa-hands-praying"></i></button>
        <button onclick="switchPage('names')" id="nav-names" class="nav-btn p-3"><i class="fa-solid fa-star-and-crescent"></i></button>
    </nav>

    <script>
        let tasbihCount = 0;
        const audioPlayer = document.getElementById('surah-audio');
        const playBtn = document.getElementById('play-btn');

        function countTasbih() {
            tasbihCount++;
            document.getElementById('tasbih-count').innerText = tasbihCount;
            if('vibrate' in navigator) navigator.vibrate(50);
        }

        function resetTasbih() {
            tasbihCount = 0;
            document.getElementById('tasbih-count').innerText = 0;
        }

        function switchPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            document.getElementById('nav-' + id).classList.add('nav-active');
            if(id === 'names') loadNames();
            // Stop audio if leaving Quran page
            if(id !== 'quran' && !audioPlayer.paused) {
                audioPlayer.pause();
                playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
            }
            window.scrollTo(0, 0);
        }

        function generateRamadanTable() {
            let tableHTML = "";
            let baseSehriH = 5, baseSehriM = 6;
            let baseIftarH = 6, baseIftarM = 2;
            for (let i = 1; i <= 30; i++) {
                let d = i + 19;
                let month = d > 28 ? "ржорж╛рж░рзНржЪ" : "ржлрзЗржмрзНрж░рзБржпрж╝рж╛рж░рж┐";
                let day = d > 28 ? d - 28 : d;
                let sM = (baseSehriM - Math.floor(i / 4));
                let iM = (baseIftarM + Math.floor(i / 3));
                tableHTML += `<tr class="border-b border-gray-50"><td class="py-3 font-bold">${i}</td><td>${day} ${month}</td><td class="text-blue-600 font-bold">05:${String(sM < 0 ? 59 : sM).padStart(2,'0')} AM</td><td class="text-orange-600 font-bold">06:${String(iM > 59 ? 0 : iM).padStart(2,'0')} PM</td></tr>`;
            }
            document.getElementById('ramadan-table-body').innerHTML = tableHTML;
        }

        async function fetchPrayerTimes() {
            try {
                const res = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Lakshmipur&country=Bangladesh&method=1');
                const data = await res.json();
                const t = data.data.timings;
                
                document.getElementById('suhur-time').innerText = formatTime(t.Fajr);
                document.getElementById('iftar-time').innerText = formatTime(t.Maghrib);
                
                updateNextPrayer(t);
            } catch(e) { console.log("Prayer fetch error"); }
        }

        function formatTime(time) {
            let [h, m] = time.split(':');
            let ampm = h >= 12 ? 'PM' : 'AM';
            h = h % 12 || 12;
            return `${h}:${m} ${ampm}`;
        }

        function updateNextPrayer(t) {
            const prayers = [
                {name: 'ржлржЬрж░', time: t.Fajr},
                {name: 'ржпрзЛрж╣рж░', time: t.Dhuhr},
                {name: 'ржЖрж╕рж░', time: t.Asr},
                {name: 'ржорж╛ржЧрж░рж┐ржм', time: t.Maghrib},
                {name: 'ржПрж╢рж╛', time: t.Isha}
            ];
            const now = new Date();
            const currentTime = now.getHours() * 60 + now.getMinutes();
            
            let next = prayers[0];
            for(let p of prayers) {
                let [h, m] = p.time.split(':').map(Number);
                if((h * 60 + m) > currentTime) {
                    next = p;
                    break;
                }
            }
            document.getElementById('next-prayer-name').innerText = next.name;
            document.getElementById('next-prayer-time').innerText = formatTime(next.time);
        }

        async function openQuran() {
            switchPage('quran');
            const res = await fetch('https://api.alquran.cloud/v1/surah');
            const data = await res.json();
            document.getElementById('surah-list').innerHTML = data.data.map(s => `
                <div onclick="loadSurah(${s.number}, '${s.englishName}')" class="p-4 bg-white border rounded-2xl flex justify-between items-center shadow-sm active:bg-indigo-50">
                    <div class="flex items-center space-x-3"><span class="w-8 h-8 bg-indigo-600 text-white rounded-lg flex items-center justify-center text-xs font-bold">${s.number}</span><p class="font-bold text-sm">${s.englishName}</p></div>
                    <span class="font-arabic text-xl text-indigo-900" dir="rtl">${s.name}</span>
                </div>
            `).join('');
        }

        async function loadSurah(num, name) {
            document.getElementById('surah-detail').classList.remove('hidden');
            document.getElementById('surah-title').innerText = name;
            document.getElementById('ayats').innerHTML = "<p class='text-center py-10'>рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</p>";
            
            // Set Audio URL (Mishary Rashid Alafasy)
            audioPlayer.src = `https://download.quranicaudio.com/quran/mishari_rashid_al_afasy/${String(num).padStart(3, '0')}.mp3`;
            playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';

            const [ar, bn] = await Promise.all([
                fetch(`https://api.alquran.cloud/v1/surah/${num}`).then(r => r.json()),
                fetch(`https://api.alquran.cloud/v1/surah/${num}/bn.bengali`).then(r => r.json())
            ]);
            
            document.getElementById('ayats').innerHTML = ar.data.ayahs.map((a, i) => `
                <div class="border-b border-gray-100 pb-6">
                    <p class="font-arabic text-2xl mb-3 text-slate-800">${a.text}</p>
                    <p class="text-sm text-gray-500 text-left">${bn.data.ayahs[i].text}</p>
                </div>
            `).join('');
        }

        function toggleAudio() {
            if(audioPlayer.paused) {
                audioPlayer.play();
                playBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
            } else {
                audioPlayer.pause();
                playBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
            }
        }

        function closeSurah() {
            document.getElementById('surah-detail').classList.add('hidden');
            audioPlayer.pause();
        }

        function loadNames() {
            fetch('https://api.aladhan.com/v1/asmaAlHusna').then(r => r.json()).then(data => {
                document.getElementById('names-grid').innerHTML = data.data.map(n => `
                    <div class="bg-white p-4 rounded-2xl border text-center shadow-sm">
                        <p class="font-arabic text-xl text-indigo-600">${n.name}</p>
                        <p class="text-[10px] font-bold mt-1 text-slate-800">${n.transliteration}</p>
                        <p class="text-[9px] text-gray-400 leading-tight">${n.en.meaning}</p>
                    </div>
                `).join('');
            });
        }

        window.onload = () => { generateRamadanTable(); fetchPrayerTimes(); };
    </script>
</body>
</html>
